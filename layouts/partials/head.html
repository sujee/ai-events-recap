<div class="header">
	{{ if .Site.Params.Avatar }}
		<div class="avatar">
			<a href="{{ .Site.BaseURL }}">
				<img src="{{ .Site.Params.Avatar }}" alt="{{ .Site.Title }}" />
			</a>
		</div>
	{{ end }}
	<h1 class="site-title"><a href="{{ .Site.BaseURL }}">{{ .Site.Title }}</a></h1>
	<div class="site-description">
		{{- if isset .Site.Params "subtitle" -}}
		<p>{{ .Site.Params.Subtitle | markdownify }}</p>
		{{- end -}}
		<nav class="nav social">
			<ul class="flat">
				{{- range $index, $key := .Site.Params.Social -}}
					<li><a href="{{ $key.url }}" title="{{ $key.name }}"><i data-feather="{{ $key.icon }}"></i></a></li>
				{{- end -}}

				{{- if or (eq .Site.Params.mode "auto") (eq .Site.Params.mode "dark") -}}
                			<span class="scheme-toggle"><a href="#" id="scheme-toggle"></a>
				{{- end -}}
			</ul>
		</nav>
	</div>

	<nav class="nav" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
		<ul class="flat" style="margin: 0;">
			{{ range .Site.Menus.main }}
			<li>
				<a href="{{ .URL }}"{{ if eq .Name "GitHub" }} target="_blank" rel="noopener noreferrer"{{ end }}>
					{{ if eq .Name "GitHub" }}
						<img src="{{ $.Site.BaseURL }}images/github.svg" alt="GitHub" style="display: inline; vertical-align: middle; margin-right: 4px; width: 16px; height: 16px;">
					{{ end }}
					{{ .Name }}
				</a>
			</li>
			{{ end }}
		</ul>
		
		<!-- Search Bar in Navbar -->
		<div class="navbar-search" style="margin-left: auto; position: relative;">
			<input type="text" id="navbar-search-input" placeholder="Search..." style="
				padding: 8px 12px 8px 35px;
				font-size: 14px;
				border: 1px solid #ddd;
				border-radius: 6px;
				background: #fafafa;
				width: 200px;
				transition: all 0.3s ease;
			" 
			onfocus="this.style.borderColor='#3b82f6'; this.style.background='#ffffff'; this.style.width='250px';" 
			onblur="this.style.borderColor='#ddd'; this.style.background='#fafafa'; this.style.width='200px';">
			<!-- Search Icon -->
			<svg style="
				position: absolute;
				left: 10px;
				top: 50%;
				transform: translateY(-50%);
				width: 18px;
				height: 18px;
				color: #374151;
				pointer-events: none;
				stroke-width: 2;
			" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<circle cx="11" cy="11" r="8"></circle>
				<path d="21 21l-4.35-4.35"></path>
			</svg>
		</div>
	</nav>
	
	<!-- Tag Cloud -->
	<div class="tag-cloud" style="margin-top: 1rem; padding: 0.5rem 0;">
		{{ $topics := .Site.Taxonomies.topics }}
		{{ $categories := .Site.Taxonomies.categories }}
		
		<!-- Categories Section -->
		{{ if $categories }}
		<div class="categories-section" style="margin-bottom: 0.5rem;">
			<span style="font-weight: bold; margin-right: 0.5rem; color: #666;">Categories:</span>
			{{ $sortedCategories := sort $categories "Count" "desc" }}
			{{ range $sortedCategories }}
				<a href="{{ $.Site.BaseURL }}categories/{{ .Page.Title | urlize }}/" class="tag-item category" style="
					display: inline-block;
					padding: 2px 8px;
					margin: 2px 4px;
					border-radius: 12px;
					text-decoration: none;
					font-size: {{ if gt .Count 5 }}0.9em{{ else if gt .Count 2 }}0.8em{{ else }}0.7em{{ end }};
					background: #f0f9ff;
					color: #0284c7;
					border: 1px solid #bae6fd;
				" title="{{ .Count }} post{{ if ne .Count 1 }}s{{ end }}">
					{{ .Page.Title }} ({{ .Count }})
				</a>
			{{ end }}
		</div>
		{{ end }}
		
		<!-- Topics Section -->
		{{ if $topics }}
		<div class="topics-section">
			<span style="font-weight: bold; margin-right: 0.5rem; color: #666;">Topics:</span>
			{{ $sortedTopics := sort $topics "Count" "desc" }}
			{{ range first 5 $sortedTopics }}
				<a href="{{ $.Site.BaseURL }}topics/{{ .Page.Title | urlize }}/" class="tag-item topic" style="
					display: inline-block;
					padding: 2px 8px;
					margin: 2px 4px;
					border-radius: 12px;
					text-decoration: none;
					font-size: {{ if gt .Count 5 }}0.9em{{ else if gt .Count 2 }}0.8em{{ else }}0.7em{{ end }};
					background: #e7f3ff;
					color: #0066cc;
					border: 1px solid #b3d9ff;
				" title="{{ .Count }} post{{ if ne .Count 1 }}s{{ end }}">
					{{ .Page.Title | lower }} ({{ .Count }})
				</a>
			{{ end }}
			<a href="{{ $.Site.BaseURL }}topics/" style="
				display: inline-block;
				padding: 2px 8px;
				margin: 2px 4px;
				border-radius: 12px;
				text-decoration: none;
				font-size: 0.7em;
				background: #f8f9fa;
				color: #6c757d;
				border: 1px solid #dee2e6;
			" title="View all topics">
				view all
			</a>
		</div>
		{{ end }}
	</div>
</div>
